{include file="public/header" /}
	<body onload="getCookie();">
		{include file="public/top" /}
		
	<div class="containerlist" >
			<div class="ctpagelogin">
				<div class="conter1200">
					<div class="logintxt">
							<div class="loginlist">
						<form class="form-horizontal" role="form">
							<div class="inner-addon left-addon">
							    <i class="glyphicon glyphicon-user"></i>
							    <input type="text" class="form-control"  placeholder="请输入手机号" id="login_code"/>
							</div>
							<div class="inner-addon left-addon">
							    <i class="glyphicon glyphicon-lock"></i>
							    <input type="password" class="form-control" placeholder="请输入密码" id="login_password" maxlength="16"/>
							</div>
			
							<div class="form-group">
							    <div class=" col-sm-6">
							      <div class="checkbox">
							        <label>
							          <input type="checkbox" id="rememberUser">自动登录
							        </label>
							      </div>
							    </div>
							     <div class=" col-sm-6">
							     	<div class="form-group" style="text-align: right; padding-right: 30px; line-height: 35px;">
									  	<a href="/web/register">创建账号</a>
									  </div>
							     </div>
							  </div>
							  <div class="form-group">
						
								<div class="col-sm-12">
							     <button type="button" class="btn btn-primary" style="width: 100%; height: 45px;" onclick="login();" id="loginBtn">立即登录</button>
							    </div>
							  </div>
							  
							</form>
						</div>	
					</div>
					
				</div>		
			</div>
		</div>
	</body>
</html>
<script>
	
	$("form :input").blur(function() {
	var $parent = $(this).parent();
	$parent.find(".msg").remove();
	if($(this).is("#login_code")) {
		if(($.trim(this.value) != "" && !/^1[3,5,7,8,9]\d{9}$/.test($.trim(this.value))) || $.trim(this.value).length < 11|| $.trim(this.value).length>11) {
			var errorMsg = " 请输入正确的手机号码！";
			$parent.append("<span class='msg onError' style='padding-left:15px;position: absolute; z-index: 9;line-height: 33px;'>" + errorMsg + "</span>");
		} else {
			$parent.find(".high").remove();
		}
	}
	//密码
	if($(this).is("#login_password")) {
		if($.trim(this.value) == "" || $.trim(this.value).length < 6) {
			var errorMsg = "密码至少6位！";
			$parent.append("<span class='msg onError' style='padding-left:15px;position: absolute; z-index: 9;line-height: 33px;'>" + errorMsg + "</span>");
		} else {
			$parent.find(".high").remove();
		}
	}
}).keyup(function() {
	
	$(this).triggerHandler("blur");
}).focus(function() {
	$(this).triggerHandler("blur");
});


function setCookie() {
	
         var loginCode = $("#login_code").val();   
         var pwd = $("#login_password").val(); 
         var checked = $("[name='checkbox']:checked");//获取“是否记住密码”复选框  
  
         if(checked){ 
         	//判断是否选中了“记住密码”复选框
            $.cookie("login_code",loginCode, { expires: 7 });//调用jquery.cookie.js中的方法设置cookie中的用户名    
            $.cookie("pwd",pwd, { expires: 7 });//调用jquery.cookie.js中的方法设置cookie中的登陆密码，并使用base64（jquery.base64.js）进行加密    
         }else{     
            $.cookie("pwd", null);     
         }      
    }     
    function getCookie(){ 
    	//获取cookie
         var loginCode = $.cookie("login_code"); //获取cookie中的用户名    
         var pwd =  $.cookie("pwd"); //获取cookie中的登陆密码    
         if(pwd){
         	//密码存在的话把“记住用户名和密码”复选框勾选住
           $("#rememberUser").attr('checked',"true")
         }    
         if(loginCode){
         	//用户名存在的话把用户名填充到用户名文本框
            $("#login_code").val(loginCode);    
         }    
         if(pwd){
         	//密码存在的话把密码填充到密码文本框
            $("#login_password").val(pwd);   
         }    
    }     
function login(){     
    var userName = $('#login_code').value;      
    var userPass = $('#login_password').value;     

    if($("[name='checkbox']").attr("checked","true")){    
        //添加cookie    
        setCookie();   
//      alert($.cookie("login_code"))
//      alert($.cookie("pwd"))
        window.location = "";    
    }else{    
        alert("不记密码登录。");    
        window.location = "";    
    }    
}
       
</script>